# JustNews V4 — In‑Use Files Inventory

Generated: 2025-08-23

This document lists files and folders in the workspace that appear to be actively used by the JustNewsAgentic runtime (entry points, agent servers, core scripts, configs, models, and tests). "In‑use" is inferred from repository structure, agent entry points (`main.py`, `*_engine.py`), the start script, and common configuration files. If you want a narrower or broader definition (for example, only files referenced by CI or docker-compose), tell me and I will regenerate the list.

Assumptions
- "In‑use" means files that are entrypoints, agent API routes, runtime launch scripts, core configuration, or model/engine code under `agents/*/`.
- Generated by scanning repository root, `agents/` subfolders, and common scripts. Not every file under `agents/*/models` is listed individually (those are model artifacts) — the folder is noted instead.

Summary (high level)
- Core repo entrypoints: `README.md`, `start_services_daemon.sh`, `stop_services.sh`, `docker-compose`-style artifacts and environment files.
- MCP / Bus & Agent servers: `agents/mcp_bus/main.py`, per-agent `main.py` or equivalent (newsreader, analyst, synthesizer, etc.).
- Agent business logic / engines: `agents/*/tools.py`, `*_engine.py`, `*_v2_engine.py`, `*_v3_production_engine.py` where present.
- Agent model folders: `agents/*/models/` (per-agent caches).
- Scripts and utilities: `scripts/*` (bootstrap, verify, run_tests.sh).
- Tests: `tests/` and `agents/*/test_*.py` files.

---

## Core repository files
- `README.md` — Project readme and quick start (entrypoint for humans).
- `CHANGELOG.md` / `CHANGELOG.md.bak` — Release notes.
- `requirements.txt` — Global Python dependencies (used for dev/setup).
- `environment-production.yml` — Conda env spec for production.
- `pytest.ini` — Test runner configuration.
- `start_services_daemon.sh` — Launch script that starts all agents (important runtime entrypoint).
- `stop_services.sh` — Stop script / helper.
- `scripts/run_tests.sh` — Test wrapper (used by VS Code tasks in workspace).
- `scripts/dev_setup.sh`, `scripts/bootstrap_models.py`, `scripts/download_agent_models.py` — model bootstrap & dev helpers.
- `model_cache/` — shared model cache area.
- `models/` — local model artifacts (top-level) and subfolders.
- `memory_v2.db` and `memory_v2_vectordb/` — local DB / vector store artifacts (Memory agent data).

## MCP & Bus
- `agents/mcp_bus/main.py` — MCP Bus FastAPI app (register/call/agents/health endpoints).
- `agents/mcp_bus/requirements.txt` — agent dependencies.
- `agents/mcp_bus/mcp_bus.log` — runtime log (referenced by start script).

## Agent servers (per-agent inventory)
For each agent the important files are the ASGI entrypoint (`main.py`) and the business logic and engines (`tools.py`, `*_engine.py`, `models/`, `requirements.txt` when present). Where an agent uses a different entrypoint, that file is noted.

- Analyst (`agents/analyst/`)
  - `main.py` — ASGI entrypoint / agent startup
  - `tools.py` — business logic used by endpoints/tests
  - `native_tensorrt_engine.py`, `native_tensorrt_compiler.py`, `tensorrt_*` — TensorRT engine and helpers
  - `requirements_analyst.txt`, `requirements_v4.txt` — dependency manifests
  - `tensorrt_engines/` — compiled TensorRT artifacts
  - `models/` — model cache for the analyst agent
  - `analyst_agent.log` — agent log

- Balancer (`agents/balancer/`)
  - `main.py` and `balancer.py` — balancing logic and ASGI wrapper
  - `tools.py` — balancer tools used by call routing
  - `test_balancer_agent.py` — tests
  - `models/` and `balancer_agent.log`
  - Note: `start_services_daemon.sh` has a special-case for starting `balancer` using `agents/balancer/balancer.py`.

- Chief Editor (`agents/chief_editor/`)
  - `main.py` — entrypoint
  - `chief_editor_v2_engine.py` — engine
  - `tools.py` — agent tools
  - `requirements.txt`, `chief_editor_agent.log`

- Common utilities (`agents/common/`)
  - `embedding.py`, `gpu_manager.py`, `shutdown.py` — shared helpers used across agents

- Critic (`agents/critic/`)
  - `main.py`, `tools.py` — agent logic
  - `critic_v2_engine.py`, `gpu_tools.py` — engine and GPU helpers
  - `requirements.txt`, `critic_agent.log`

- Dashboard (`agents/dashboard/`)
  - `main.py`, `gui.py`, `config.py` — dashboard application
  - `dashboard_config.json`

- Fact Checker (`agents/fact_checker/`)
  - `main.py`, `tools.py`, `tools_v2.py` — agent tools
  - `fact_checker_v2_engine.py`, `gpu_tools.py`
  - `models/`, `requirements.txt`, `fact_checker_agent.log`

- Memory (`agents/memory/`)
  - `main.py`, `memory_v2_engine.py`, `tools.py` — memory storage and retrieval
  - `db_migrations/` — DB schema
  - `memory_agent.log`, `requirements.txt`

- NewsReader (`agents/newsreader/`)
  - `main.py` — ASGI entrypoint (registers with MCP Bus)
  - `newsreader_agent.py`, `newsreader_v2_engine.py`, `newsreader_v2_true_engine.py`
  - `tools.py`, `models/`, `requirements.txt`
  - `newsreader_agent.log` — agent log

- Reasoning (`agents/reasoning/`)
  - `main.py`, `nucleoid_implementation.py` — symbolic reasoning engine
  - `preload_rules.txt`, `requirements.txt`, `reasoning_agent.log`

- Scout (`agents/scout/`)
  - `main.py`, `gpu_scout_engine.py`, `practical_newsreader_solution.py`, `tools.py`
  - `production_crawlers/`, `models/`, `scout_agent.log`

- Synthesizer (`agents/synthesizer/`)
  - `main.py`, `tools.py`
  - `synthesizer_v2_engine.py`, `synthesizer_v3_production_engine.py` — production engines
  - `models/`, `synthesizer_agent.log`, `requirements.txt`

- Additional agents (others present but lower-level files)
  - `agents/critic/`, `agents/chief_editor/`, `agents/balancer/` — have logs, engines and tools as listed above.

## Scripts & tooling
- `start_services_daemon.sh` — multi-agent start orchestration. Important flags and env vars set here (e.g., `MCP_BUS_URL`, conda activate, PYTHONPATH).
- `stop_services.sh` — stop helper.
- `scripts/run_tests.sh` — test wrapper used by workspace task.
- `scripts/bootstrap_models.py`, `scripts/download_agent_models.py`, `scripts/verify_models.py` — model provisioning utilities.
- `scripts/deprecate_dialogpt.py` — repository transition helper (present in `scripts/`).

## Documentation & developer resources
- `markdown_docs/` — primary documentation (agent docs, production_status, development_reports).
  - `markdown_docs/README.md` (navigation hub)
  - `markdown_docs/agent_documentation/` — agent guides
  - `markdown_docs/development_reports/` — technical reports referenced in README
- `docs/` — proposals and architecture documents (`JustNews_Plan_V4.md`, `TECHNICAL_ARCHITECTURE.md`)
- `TESTING.md` — test guidance

## Tests
- `tests/` — unit and integration tests (e.g., `test_agents_endpoints.py`, `test_analyst_tools.py`, etc.).
- `agents/*/test_*.py` — agent-specific tests (e.g., `agents/analyst/test_native_agent.py`, `agents/balancer/test_balancer_agent.py`).

## Model caches, DBs and logs
- `agents/*/models/` — per-agent model caches (not enumerated file-by-file).
- `model_cache/` — shared model cache.
- `memory_v2.db` and `memory_v2_vectordb/` — memory/semantic DB storage.
- `agents/*/*_agent.log` & `logs/` — runtime logs used by the start script and troubleshooting.

---

Start script — exact runtime files

The following list is the precise set of files and settings the `start_services_daemon.sh` script uses when launching the full system (all agents). This was derived directly from the script logic (commands, special-cases, port mappings and log file locations).

Core launch script
- `start_services_daemon.sh` — orchestrates agent startup, exports `PYTHONPATH`, activates the conda env, defines agents and ports, and performs health checks.

Environment variables and runtime settings referenced by the script
- `conda` activation: `/home/adra/miniconda3/etc/profile.d/conda.sh` (sourced by the script)
- Conda env activated: `justnews-v2-prod` (script runs `conda activate justnews-v2-prod`)
- `MCP_BUS_URL` — exported as `http://localhost:8000`
- `PYTHONPATH` — set to `/home/adra/JustNewsAgentic` so package imports like `agents.*` resolve
- PostgreSQL vars used for Memory agent: `POSTGRES_HOST`, `POSTGRES_DB`, `POSTGRES_USER`, `POSTGRES_PASSWORD`

Agents started (order, agent name → port)
- `mcp_bus` → 8000
- `chief_editor` → 8001
- `scout` → 8002
- `fact_checker` → 8003
- `analyst` → 8004
- `synthesizer` → 8005
- `critic` → 8006
- `memory` → 8007
- `reasoning` → 8008
- `newsreader` → 8009
- `balancer` → 8010
- `dashboard` → 8011

Exact commands / entrypoints used by the script
- For `mcp_bus` (special casing in script):
  - Command: `python -m uvicorn agents.mcp_bus.main:app --host 0.0.0.0 --port 8000`
  - Files referenced: `agents/mcp_bus/main.py` (module path `agents.mcp_bus.main`)
  - Log: `agents/mcp_bus/mcp_bus.log`

- For `balancer` (special-case run directly as a script):
  - Command: `python agents/balancer/balancer.py`
  - Files referenced: `agents/balancer/balancer.py` (script entrypoint)
  - Log: `agents/balancer/balancer_agent.log` (or `agents/balancer/balancer_agent.log` as created by the script)

- For all other agents (generic case):
  - Command template: `python -m uvicorn agents.<agent>.main:app --host 0.0.0.0 --port <port>`
  - Entry files (module path → file):
    - `agents/chief_editor/main.py` (port 8001)
    - `agents/scout/main.py` (port 8002)
    - `agents/fact_checker/main.py` (port 8003)
    - `agents/analyst/main.py` (port 8004)
    - `agents/synthesizer/main.py` (port 8005)
    - `agents/critic/main.py` (port 8006)
    - `agents/memory/main.py` (port 8007)
    - `agents/reasoning/main.py` (port 8008)
    - `agents/newsreader/main.py` (port 8009)
    - `agents/dashboard/main.py` (port 8011)
  - Logs: each agent writes to `agents/<agent>/<agent>_agent.log` (the script builds per-agent log paths; for `mcp_bus` the log filename is `mcp_bus.log`).

Per-agent supporting files that the runtime uses (when started)
- Per-agent model caches: `agents/<agent>/models/` (these directories are consulted by each agent at startup)
- Per-agent engine & tooling files commonly imported at startup:
  - `agents/*/tools.py` — common agent tools used by endpoints and internal handlers
  - `agents/*/*_engine.py` (e.g., `synthesizer_v3_production_engine.py`, `analyst/native_tensorrt_engine.py`) — model runtime engines
  - `agents/*/requirements.txt` — dependency hints (not executed, but important for environment setup)

Health check behavior implemented by the script
- After launching each agent the script polls either `/agents` (for `mcp_bus`) or `/health` for other agents up to 5 times with 2s delay. If the check fails the script tails the agent log for diagnostics.

Minimal runtime file set (exact files you need present to run the start script successfully)
(These are the files the start script directly references or executes — other files (tests, docs, optional engines) can be omitted for a minimal runtime deployment):
- `start_services_daemon.sh` (the launch orchestrator)
- `agents/mcp_bus/main.py` (module for MCP Bus)
- `agents/balancer/balancer.py` (balancer script)
- `agents/chief_editor/main.py`
- `agents/scout/main.py`
- `agents/fact_checker/main.py`
- `agents/analyst/main.py`
- `agents/synthesizer/main.py`
- `agents/critic/main.py`
- `agents/memory/main.py`
- `agents/reasoning/main.py`
- `agents/newsreader/main.py`
- `agents/dashboard/main.py`
- `agents/common/shutdown.py` (start script tries to register common shutdown endpoints in several agents)
- `model_cache/` and `agents/*/models/` (model artifacts/caches required by agents at runtime)
- Environment files referenced during startup (to reproduce env): `environment-production.yml`, `requirements.txt` or per-agent `requirements.txt`

If you want, I can now produce:
- a tar/manifest enumerating only the minimal runtime file set above for packaging, or
- a script that verifies each of the minimal files exists and is readable before attempting to start the system.

Notes & next steps
 - I used static analysis (directory listings and direct reads of `start_services_daemon.sh` and representative `agents/*/main.py` files) to derive this exact set. This is a precise, actionable list for the `start_services_daemon.sh` runtime path.
 - If you want me to further reduce the minimal runtime set (for example, excluding optional engine files like TensorRT engines or only packaging pure-Python fallbacks), tell me which agents or features you plan to omit and I will produce a tailored manifest.
 - I can also produce a small preflight script that checks ports are free, required files exist, and the conda env can be activated prior to starting the services.

If this looks good I will keep the file as-is. If you want a different filename or to additionally commit a packaging manifest, tell me and I will add it.

If this looks good I will commit this file to the repo (it is saved to `markdown_docs/IN_USE_FILES.md`). If you want a different filename or format, tell me which and I will update it.
